. ~/.zsh/aliases

# changing directory to code project
function c { cd ~/code/$1; }

# alternative to "rails" command to use templates
function railsapp {
  template=$1
  appname=$2
  shift 2
  rails $appname -m http://github.com/ryanb/rails-templates/raw/master/$template.rb $@
}

# misc
alias reload='. ~/.bash_profile'

# remote X-windows handling
xdr() {
    source ~/.x.display
}

xdw() {
    echo 'export DISPLAY='$DISPLAY > ~/.x.display
}

# tmux refresh of env variables
# used to refresh ssh connection for tmux 
# http://justinchouinard.com/blog/2010/04/10/fix-stale-ssh-environment-variables-in-gnu-screen-and-tmux/                                                                                                                                                                                         
function r() {   
  if [[ -n $TMUX ]]; then
    NEW_SSH_AUTH_SOCK=`tmux showenv|grep ^SSH_AUTH_SOCK|cut -d = -f 2`
    if [[ -n $NEW_SSH_AUTH_SOCK ]] && [[ -S $NEW_SSH_AUTH_SOCK ]]; then 
      export SSH_AUTH_SOCK=$NEW_SSH_AUTH_SOCK  
    fi
    NEW_DISPLAY=`tmux showenv|grep ^DISPLAY|cut -d = -f 2`
    if [[ -n $NEW_DISPLAY ]]; then 
      export DISPLAY=$NEW_DISPLAY  
    fi
  fi
}

